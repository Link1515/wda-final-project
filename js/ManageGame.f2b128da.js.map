{"version":3,"sources":["webpack:///./src/views/UserCenter/ManageGame.vue?660a","webpack:///src/views/UserCenter/ManageGame.vue","webpack:///./src/views/UserCenter/ManageGame.vue?b8ba","webpack:///./src/views/UserCenter/ManageGame.vue?7935","webpack:///./src/views/UserCenter/ManageGame.vue?ea73"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","staticStyle","searchTypeList","option","type","model","value","callback","$$v","searchType","expression","on","$event","indexOf","_k","keyCode","key","searchGame","apply","arguments","searchText","gotGames","length","textAlign","scopedSlots","_u","fn","slotProps","data","image","_s","author","deleteGame","_id","_e","staticRenderFns","name","methods","component"],"mappings":"mHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,eAAe,CAACF,EAAG,MAAM,CAACG,YAAY,qEAAqE,CAACH,EAAG,KAAK,CAACJ,EAAIQ,GAAG,UAAUJ,EAAG,MAAM,CAACG,YAAY,0DAA0D,CAACH,EAAG,YAAY,CAACG,YAAY,kDAAkDE,YAAY,CAAC,WAAa,QAAQH,MAAM,CAAC,QAAUN,EAAIU,eAAe,OAAS,SAAUC,GAAU,OAAOA,EAAOC,MAAQ,MAAQ,OAAO,YAAc,UAAUC,MAAM,CAACC,MAAOd,EAAc,WAAEe,SAAS,SAAUC,GAAMhB,EAAIiB,WAAWD,GAAKE,WAAW,gBAAgBd,EAAG,YAAY,CAACG,YAAY,mCAAmCY,GAAG,CAAC,QAAU,SAASC,GAAQ,OAAIA,EAAOR,KAAKS,QAAQ,QAAQrB,EAAIsB,GAAGF,EAAOG,QAAQ,QAAQ,GAAGH,EAAOI,IAAI,SAAkB,KAAcxB,EAAIyB,WAAWC,MAAM,KAAMC,aAAad,MAAM,CAACC,MAAOd,EAAc,WAAEe,SAAS,SAAUC,GAAMhB,EAAI4B,WAAWZ,GAAKE,WAAW,gBAAgBd,EAAG,SAAS,CAACG,YAAY,mCAAmCD,MAAM,CAAC,KAAO,gBAAgBa,GAAG,CAAC,MAAQnB,EAAIyB,eAAe,KAAMzB,EAAI6B,SAASC,OAAS,EAAG1B,EAAG,YAAY,CAACE,MAAM,CAAC,YAAc,GAAG,MAAQN,EAAI6B,WAAW,CAACzB,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,QAAQ,OAAS,KAAK,UAAY,CAAEyB,UAAW,WAAYC,YAAYhC,EAAIiC,GAAG,CAAC,CAACT,IAAI,OAAOU,GAAG,SAASC,GAAW,MAAO,CAAEA,EAAUC,KAAU,MAAEhC,EAAG,MAAM,CAACK,YAAY,CAAC,MAAQ,SAASH,MAAM,CAAC,IAAM6B,EAAUC,KAAKC,SAASjC,EAAG,MAAM,CAACK,YAAY,CAAC,MAAQ,SAASH,MAAM,CAAC,IAAM,EAAQ,eAAgD,MAAK,EAAM,cAAcF,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,OAAO,OAAS,KAAK,UAAY,CAAEyB,UAAW,aAAc3B,EAAG,SAAS,CAACE,MAAM,CAAC,OAAS,QAAQ,UAAY,CAAEyB,UAAW,WAAYC,YAAYhC,EAAIiC,GAAG,CAAC,CAACT,IAAI,OAAOU,GAAG,SAASC,GAAW,MAAO,CAAC/B,EAAG,OAAO,CAACG,YAAY,YAAY,CAACP,EAAIQ,GAAGR,EAAIsC,GAAGH,EAAUC,KAAKG,eAAe,MAAK,EAAM,cAAcnC,EAAG,SAAS,CAACE,MAAM,CAAC,OAAS,KAAK,UAAY,CAAEyB,UAAW,WAAYC,YAAYhC,EAAIiC,GAAG,CAAC,CAACT,IAAI,OAAOU,GAAG,SAASC,GAAW,MAAO,CAAC/B,EAAG,SAAS,CAACG,YAAY,mDAAmDD,MAAM,CAAC,MAAQ,QAAQa,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOpB,EAAIwC,WAAWL,EAAUC,KAAKK,aAAa,MAAK,EAAM,eAAe,GAAGzC,EAAI0C,KAAKtC,EAAG,QAAQ,CAACE,MAAM,CAAC,SAAW,iBAAiB,IACpyEqC,EAAkB,G,YCwCtB,G,UAAA,CACEC,KAAM,aACNR,KAFF,WAGI,MAAO,CACL1B,eAAgB,CACtB,CAAQ,KAAR,OAAQ,KAAR,QACA,CAAQ,KAAR,QAAQ,KAAR,OAEMO,WAAY,GACZW,WAAY,GACZC,SAAU,KAGdgB,QAAS,CACP,WADJ,WACA,gLAEA,aAFA,uBAGA,wEAHA,6BAMA,aANA,uBAOA,sEAPA,6BAWA,sBAXA,kCAYA,qDACA,SACA,4CAdA,iBAYA,EAZA,EAYA,KAKA,oBAjBA,2BAkBA,oBAlBA,kCAmBA,mDACA,SACA,4CArBA,iBAmBA,EAnBA,EAmBA,KAKA,sBAxBA,QA2BA,gBA3BA,qDA6BA,SACA,aACA,WACA,kCAhCA,6DAoCI,WArCJ,SAqCA,0LAEA,SACA,eACA,iBACA,sBALA,UAEA,EAFA,QAOA,cAPA,iDASA,+CACA,SACA,4CAIA,cAEA,SACA,eACA,WACA,cApBA,qDAuBA,SACA,aACA,WACA,kCA1BA,gEC3FmW,I,wBCQ/VC,EAAY,eACd,EACA/C,EACA4C,GACA,EACA,KACA,KACA,MAIa,aAAAG,E,kECnBf","file":"js/ManageGame.f2b128da.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"ManageGame\"}},[_c('div',{staticClass:\"d-flex flex-column justify-content-center align-items-center mb-3\"},[_c('h1',[_vm._v(\"桌遊管理\")]),_c('div',{staticClass:\"d-flex flex-column flex-lg-row align-items-center mb-5\"},[_c('VueSelect',{staticClass:\"VueSelectWidth me-lg-2 flex-grow-1 mb-2 mb-lg-0\",staticStyle:{\"background\":\"#fff\"},attrs:{\"options\":_vm.searchTypeList,\"reduce\":function (option) { return option.type; },\"label\":\"name\",\"placeholder\":\"選擇搜尋類型\"},model:{value:(_vm.searchType),callback:function ($$v) {_vm.searchType=$$v},expression:\"searchType\"}}),_c('InputText',{staticClass:\"me-lg-2 flex-grow-1 mb-2 mb-lg-0\",on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.searchGame.apply(null, arguments)}},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}}),_c('Button',{staticClass:\"p-button-rounded p-button-raised\",attrs:{\"icon\":\"pi pi-search\"},on:{\"click\":_vm.searchGame}})],1)]),(_vm.gotGames.length > 0)?_c('DataTable',{attrs:{\"stripedRows\":\"\",\"value\":_vm.gotGames}},[_c('Column',{attrs:{\"field\":\"image\",\"header\":\"圖片\",\"bodyStyle\":{ textAlign: 'center' }},scopedSlots:_vm._u([{key:\"body\",fn:function(slotProps){return [(slotProps.data.image)?_c('img',{staticStyle:{\"width\":\"100px\"},attrs:{\"src\":slotProps.data.image}}):_c('img',{staticStyle:{\"width\":\"100px\"},attrs:{\"src\":require(\"@/assets/images/image-placeholder.png\")}})]}}],null,false,2550978829)}),_c('Column',{attrs:{\"field\":\"name\",\"header\":\"名稱\",\"bodyStyle\":{ textAlign: 'center' }}}),_c('Column',{attrs:{\"header\":\"作者 ID\",\"bodyStyle\":{ textAlign: 'center' }},scopedSlots:_vm._u([{key:\"body\",fn:function(slotProps){return [_c('span',{staticClass:\"authorId\"},[_vm._v(_vm._s(slotProps.data.author))])]}}],null,false,3570175596)}),_c('Column',{attrs:{\"header\":\"操作\",\"bodyStyle\":{ textAlign: 'center' }},scopedSlots:_vm._u([{key:\"body\",fn:function(slotProps){return [_c('Button',{staticClass:\"p-button-rounded p-button-raised p-button-danger\",attrs:{\"label\":\"移除桌遊\"},on:{\"click\":function($event){return _vm.deleteGame(slotProps.data._id)}}})]}}],null,false,3821164689)})],1):_vm._e(),_c('Toast',{attrs:{\"position\":\"top-center\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"ManageGame\">\n    <div class=\"d-flex flex-column justify-content-center align-items-center mb-3\">\n      <h1>桌遊管理</h1>\n      <div class=\"d-flex flex-column flex-lg-row align-items-center mb-5\">\n        <VueSelect\n          v-model=\"searchType\"\n          :options=\"searchTypeList\"\n          :reduce=\"option => option.type\"\n          label=\"name\" class=\"VueSelectWidth me-lg-2 flex-grow-1 mb-2 mb-lg-0\"\n          placeholder=\"選擇搜尋類型\"\n          style=\"background: #fff\"\n        />\n        <InputText v-model=\"searchText\" @keydown.enter=\"searchGame\" class=\"me-lg-2 flex-grow-1 mb-2 mb-lg-0\"/>\n        <Button icon=\"pi pi-search\" @click=\"searchGame\" class=\"p-button-rounded p-button-raised\" />\n      </div>\n    </div>\n    <DataTable v-if=\"gotGames.length > 0\" stripedRows :value=\"gotGames\">\n      <Column field=\"image\" header=\"圖片\" :bodyStyle=\"{ textAlign: 'center' }\">\n        <template #body=\"slotProps\">\n          <img v-if=\"slotProps.data.image\" :src=\"slotProps.data.image\" style=\"width: 100px\">\n          <img v-else src=\"@/assets/images/image-placeholder.png\" style=\"width: 100px\">\n        </template>\n      </Column>\n      <Column field=\"name\" header=\"名稱\" :bodyStyle=\"{ textAlign: 'center' }\" />\n      <Column header=\"作者 ID\" :bodyStyle=\"{ textAlign: 'center' }\">\n        <template #body=\"slotProps\">\n          <span class=\"authorId\">{{ slotProps.data.author }}</span>\n        </template>\n      </Column>\n      <Column header=\"操作\" :bodyStyle=\"{ textAlign: 'center' }\">\n        <template #body=\"slotProps\">\n          <Button label=\"移除桌遊\" @click=\"deleteGame(slotProps.data._id)\" class=\"p-button-rounded p-button-raised p-button-danger\"/>\n        </template>\n      </Column>\n    </DataTable>\n    <Toast position=\"top-center\"/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ManageGame',\n  data () {\n    return {\n      searchTypeList: [\n        { name: '桌遊名稱', type: 'name' },\n        { name: '桌遊 ID', type: 'id' }\n      ],\n      searchType: '',\n      searchText: '',\n      gotGames: []\n    }\n  },\n  methods: {\n    async searchGame () {\n      try {\n        if (!this.searchType) {\n          this.$toast.add({ severity: 'error', summary: '錯誤', detail: '未選擇搜尋種類', life: 3000 })\n          return\n        }\n        if (!this.searchText) {\n          this.$toast.add({ severity: 'error', summary: '錯誤', detail: '未填寫搜尋', life: 3000 })\n          return\n        }\n\n        if (this.searchType === 'name') {\n          const { data } = await this.serverAPI.get('games/getGameByName/' + this.searchText, {\n            headers: {\n              authorization: 'Bearer ' + this.userInfo.token\n            }\n          })\n          this.gotGames = data.result\n        } else if (this.searchType === 'id') {\n          const { data } = await this.serverAPI.get('games/getGameById/' + this.searchText, {\n            headers: {\n              authorization: 'Bearer ' + this.userInfo.token\n            }\n          })\n          this.gotGames = [data.result]\n        }\n\n        this.searchText = ''\n      } catch (error) {\n        this.$swal({\n          icon: 'error',\n          title: '錯誤',\n          text: error.response.data.message\n        })\n      }\n    },\n    async deleteGame (gameId) {\n      try {\n        const result = await this.$swal({\n          icon: 'warning',\n          title: '是否確定要移除?',\n          showCancelButton: true\n        })\n        if (result.isDismissed) return\n\n        this.serverAPI.delete('/games/deleteGameById/' + gameId, {\n          headers: {\n            authorization: 'Bearer ' + this.userInfo.token\n          }\n        })\n\n        this.gotGames = []\n\n        this.$swal({\n          icon: 'success',\n          title: '成功',\n          text: '移除成功'\n        })\n      } catch (error) {\n        this.$swal({\n          icon: 'error',\n          title: '錯誤',\n          text: error.response.data.message\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n#ManageGame {\n  .p-column-header-content {\n    justify-content: center;\n  }\n\n  .authorId {\n    font-size: 10px;\n  }\n}\n\n@media (min-width: 768px) {\n  #ManageGame {\n    .authorId {\n      font-size: 1rem;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageGame.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageGame.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ManageGame.vue?vue&type=template&id=d9cbd946&\"\nimport script from \"./ManageGame.vue?vue&type=script&lang=js&\"\nexport * from \"./ManageGame.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ManageGame.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageGame.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}