(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ManageGame"],{8024:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"ManageGame"}},[r("div",{staticClass:"d-flex flex-column justify-content-center align-items-center mb-3"},[r("h1",[e._v("桌遊管理")]),r("div",{staticClass:"d-flex flex-column flex-lg-row align-items-center mb-5"},[r("VueSelect",{staticClass:"VueSelectWidth me-lg-2 flex-grow-1 mb-2 mb-lg-0",staticStyle:{background:"#fff"},attrs:{options:e.searchTypeList,reduce:function(e){return e.type},label:"name",placeholder:"選擇搜尋類型"},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}}),r("InputText",{staticClass:"me-lg-2 flex-grow-1 mb-2 mb-lg-0",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchGame.apply(null,arguments)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}}),r("Button",{staticClass:"p-button-rounded p-button-raised",attrs:{icon:"pi pi-search"},on:{click:e.searchGame}})],1)]),e.gotGames.length>0?r("DataTable",{attrs:{stripedRows:"",value:e.gotGames}},[r("Column",{attrs:{field:"image",header:"圖片",bodyStyle:{textAlign:"center"}},scopedSlots:e._u([{key:"body",fn:function(e){return[e.data.image?r("img",{staticStyle:{width:"100px"},attrs:{src:e.data.image}}):r("img",{staticStyle:{width:"100px"},attrs:{src:a("04d5")}})]}}],null,!1,2550978829)}),r("Column",{attrs:{field:"name",header:"名稱",bodyStyle:{textAlign:"center"}}}),r("Column",{attrs:{header:"作者 ID",bodyStyle:{textAlign:"center"}},scopedSlots:e._u([{key:"body",fn:function(t){return[r("span",{staticClass:"authorId"},[e._v(e._s(t.data.author))])]}}],null,!1,3570175596)}),r("Column",{attrs:{header:"操作",bodyStyle:{textAlign:"center"}},scopedSlots:e._u([{key:"body",fn:function(t){return[r("Button",{staticClass:"p-button-rounded p-button-raised p-button-danger",attrs:{label:"移除桌遊"},on:{click:function(a){return e.deleteGame(t.data._id)}}})]}}],null,!1,3821164689)})],1):e._e(),r("Toast",{attrs:{position:"top-center"}})],1)},n=[],s=a("1da1"),c=(a("96cf"),{name:"ManageGame",data:function(){return{searchTypeList:[{name:"桌遊名稱",type:"name"},{name:"桌遊 ID",type:"id"}],searchType:"",searchText:"",gotGames:[]}},methods:{searchGame:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.searchType){t.next=4;break}return e.$toast.add({severity:"error",summary:"錯誤",detail:"未選擇搜尋種類",life:3e3}),t.abrupt("return");case 4:if(e.searchText){t.next=7;break}return e.$toast.add({severity:"error",summary:"錯誤",detail:"未填寫搜尋",life:3e3}),t.abrupt("return");case 7:if("name"!==e.searchType){t.next=15;break}return t.next=10,e.serverAPI.get("games/getGameByName/"+e.searchText,{headers:{authorization:"Bearer "+e.userInfo.token}});case 10:a=t.sent,r=a.data,e.gotGames=r.result,t.next=21;break;case 15:if("id"!==e.searchType){t.next=21;break}return t.next=18,e.serverAPI.get("games/getGameById/"+e.searchText,{headers:{authorization:"Bearer "+e.userInfo.token}});case 18:n=t.sent,s=n.data,e.gotGames=[s.result];case 21:e.searchText="",t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:t.t0.response.data.message});case 27:case"end":return t.stop()}}),t,null,[[0,24]])})))()},deleteGame:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$swal({icon:"warning",title:"是否確定要移除?",showCancelButton:!0});case 3:if(r=a.sent,!r.isDismissed){a.next=6;break}return a.abrupt("return");case 6:t.serverAPI.delete("/games/deleteGameById/"+e,{headers:{authorization:"Bearer "+t.userInfo.token}}),t.gotGames=[],t.$swal({icon:"success",title:"成功",text:"移除成功"}),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),t.$swal({icon:"error",title:"錯誤",text:a.t0.response.data.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()}}}),o=c,i=(a("c698"),a("2877")),l=Object(i["a"])(o,r,n,!1,null,null,null);t["default"]=l.exports},b205:function(e,t,a){},c698:function(e,t,a){"use strict";a("b205")}}]);
//# sourceMappingURL=ManageGame.f2b128da.js.map