{"version":3,"sources":["webpack:///./src/views/UserCenter/ManageUser.vue?5f27","webpack:///src/views/UserCenter/ManageUser.vue","webpack:///./src/views/UserCenter/ManageUser.vue?88d1","webpack:///./src/views/UserCenter/ManageUser.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","staticStyle","searchTypeList","option","type","model","value","callback","$$v","searchType","expression","on","$event","indexOf","_k","keyCode","key","searchUser","apply","arguments","searchStr","gotUser","avatar","account","email","directives","name","rawName","modifiers","resetUserPassword","deleteUser","_e","staticRenderFns","data","methods","component"],"mappings":"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","file":"js/ManageUser.09044d06.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"ManageUser\"}},[_c('div',{staticClass:\"d-flex flex-column justify-content-center align-items-center mb-3\"},[_c('h1',[_vm._v(\"會員管理\")]),_c('div',{staticClass:\"d-flex flex-column flex-lg-row align-items-center mb-5\"},[_c('VueSelect',{staticClass:\"VueSelectWidth me-lg-2 flex-grow-1 mb-2 mb-lg-0\",staticStyle:{\"background\":\"#fff\"},attrs:{\"options\":_vm.searchTypeList,\"reduce\":function (option) { return option.type; },\"label\":\"name\",\"placeholder\":\"選擇搜尋類型\"},model:{value:(_vm.searchType),callback:function ($$v) {_vm.searchType=$$v},expression:\"searchType\"}}),_c('InputText',{staticClass:\"me-lg-2 flex-grow-1 mb-2 mb-lg-0\",on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.searchUser.apply(null, arguments)}},model:{value:(_vm.searchStr),callback:function ($$v) {_vm.searchStr=$$v},expression:\"searchStr\"}}),_c('Button',{staticClass:\"p-button-rounded p-button-raised\",attrs:{\"icon\":\"pi pi-search\"},on:{\"click\":_vm.searchUser}})],1),(_vm.gotUser)?[_c('div',{staticClass:\"mb-3\"},[(!_vm.gotUser.avatar)?_c('Avatar',{attrs:{\"icon\":\"pi pi-user\",\"size\":\"xlarge\",\"shape\":\"circle\"}}):_c('Avatar',{attrs:{\"image\":_vm.gotUser.avatar,\"size\":\"xlarge\",\"shape\":\"circle\"}})],1),_c('div',{staticClass:\"d-flex flex-column flex-md-row align-items-center mb-2\"},[_c('span',{staticClass:\"mb-2 mb-md-0\"},[_vm._v(\"帳號\")]),_c('InputText',{staticClass:\"ms-md-3 flex-grow-1\",attrs:{\"readonly\":\"\",\"value\":_vm.gotUser.account}})],1),_c('div',{staticClass:\"d-flex flex-column flex-md-row align-items-center mb-4\"},[_c('span',{staticClass:\"mb-2 mb-md-0\"},[_vm._v(\"信箱\")]),_c('InputText',{staticClass:\"ms-md-3 flex-grow-1\",attrs:{\"readonly\":\"\",\"value\":_vm.gotUser.email}})],1),_c('div',{staticClass:\"d-flex flex-column flex-md-row align-items-center\"},[_c('Button',{directives:[{name:\"tooltip\",rawName:\"v-tooltip.bottom\",value:('將該用戶密碼重設為 0000'),expression:\"'將該用戶密碼重設為 0000'\",modifiers:{\"bottom\":true}}],staticClass:\"p-button-rounded p-button-raised mb-2 mb-md-0 mx-md-2\",attrs:{\"label\":\"重設密碼\"},on:{\"click\":_vm.resetUserPassword}}),_c('Button',{staticClass:\"p-button-rounded p-button-raised p-button-danger mb-2 mb-md-0 mx-md-2\",attrs:{\"label\":\"移除用戶\"},on:{\"click\":_vm.deleteUser}})],1)]:_vm._e()],2),_c('Toast',{attrs:{\"position\":\"top-center\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"ManageUser\">\n    <div class=\"d-flex flex-column justify-content-center align-items-center mb-3\">\n      <h1>會員管理</h1>\n      <div class=\"d-flex flex-column flex-lg-row align-items-center mb-5\">\n        <VueSelect\n          v-model=\"searchType\"\n          :options=\"searchTypeList\"\n          :reduce=\"option => option.type\"\n          label=\"name\" class=\"VueSelectWidth me-lg-2 flex-grow-1 mb-2 mb-lg-0\"\n          placeholder=\"選擇搜尋類型\"\n          style=\"background: #fff\"\n        />\n        <InputText v-model=\"searchStr\" @keydown.enter=\"searchUser\" class=\"me-lg-2 flex-grow-1 mb-2 mb-lg-0\"/>\n        <Button icon=\"pi pi-search\" @click=\"searchUser\" class=\"p-button-rounded p-button-raised\" />\n      </div>\n      <template v-if=\"gotUser\">\n        <div class=\"mb-3\">\n          <Avatar v-if=\"!gotUser.avatar\" icon=\"pi pi-user\" size=\"xlarge\" shape=\"circle\" />\n          <Avatar v-else :image=\"gotUser.avatar\" size=\"xlarge\" shape=\"circle\" />\n        </div>\n        <div class=\"d-flex flex-column flex-md-row align-items-center mb-2\">\n          <span class=\"mb-2 mb-md-0\">帳號</span>\n          <InputText readonly :value=\"gotUser.account\" class=\"ms-md-3 flex-grow-1\"/>\n        </div>\n        <div class=\"d-flex flex-column flex-md-row align-items-center mb-4\">\n          <span class=\"mb-2 mb-md-0\">信箱</span>\n          <InputText readonly :value=\"gotUser.email\" class=\"ms-md-3 flex-grow-1\"/>\n        </div>\n        <div class=\"d-flex flex-column flex-md-row align-items-center\">\n          <Button label=\"重設密碼\" @click=\"resetUserPassword\" v-tooltip.bottom=\"'將該用戶密碼重設為 0000'\" class=\"p-button-rounded p-button-raised mb-2 mb-md-0 mx-md-2\"/>\n          <Button label=\"移除用戶\" @click=\"deleteUser\" class=\"p-button-rounded p-button-raised p-button-danger mb-2 mb-md-0 mx-md-2\"/>\n        </div>\n      </template>\n    </div>\n    <Toast position=\"top-center\"/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ManageUser',\n  data () {\n    return {\n      searchTypeList: [\n        { name: '玩家帳號', type: 'account' },\n        { name: '玩家ID', type: 'id' }\n      ],\n      searchType: '',\n      searchStr: '',\n      gotUser: null\n    }\n  },\n  methods: {\n    async searchUser () {\n      try {\n        if (!this.searchType) {\n          this.$toast.add({ severity: 'error', summary: '錯誤', detail: '未選擇搜尋種類', life: 3000 })\n          return\n        }\n        if (!this.searchStr) {\n          this.$toast.add({ severity: 'error', summary: '錯誤', detail: '未填寫搜尋', life: 3000 })\n          return\n        }\n\n        const { data } = await this.serverAPI.get('users/getUserBy' + this.searchType, {\n          headers: {\n            authorization: 'Bearer ' + this.userInfo.token\n          },\n          params: {\n            searchStr: this.searchStr\n          }\n        })\n        this.searchStr = ''\n        this.gotUser = data.result\n      } catch (error) {\n        this.$swal({\n          icon: 'error',\n          title: '錯誤',\n          text: error.response.data.message\n        })\n      }\n    },\n    async resetUserPassword () {\n      try {\n        const result = await this.$swal({\n          icon: 'warning',\n          title: '是否確定重設用戶密碼?',\n          showCancelButton: true\n        })\n        if (result.isDismissed) return\n\n        await this.serverAPI.patch('/users/resetUserPassword', {\n          userId: this.gotUser._id\n        }, {\n          headers: {\n            authorization: 'Bearer ' + this.userInfo.token\n          }\n        })\n\n        this.$swal({\n          icon: 'success',\n          title: '成功',\n          text: '成功重設'\n        })\n      } catch (error) {\n        this.$swal({\n          icon: 'error',\n          title: '失敗',\n          text: error.response.data.message\n        })\n      }\n    },\n    async deleteUser () {\n      try {\n        const result = await this.$swal({\n          icon: 'warning',\n          title: '是否確定刪除用戶?',\n          showCancelButton: true\n        })\n        if (result.isDismissed) return\n\n        await this.serverAPI.delete('/users/deleteUser/' + this.gotUser._id, {\n          headers: {\n            authorization: 'Bearer ' + this.userInfo.token\n          }\n        })\n\n        this.gotUser = null\n\n        this.$swal({\n          icon: 'success',\n          title: '成功',\n          text: '成功刪除用戶'\n        })\n      } catch (error) {\n        this.$swal({\n          icon: 'error',\n          title: '錯誤',\n          text: error.response.data.message\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageUser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManageUser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ManageUser.vue?vue&type=template&id=4f645692&\"\nimport script from \"./ManageUser.vue?vue&type=script&lang=js&\"\nexport * from \"./ManageUser.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}