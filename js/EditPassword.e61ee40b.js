(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["EditPassword"],{7611:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"editPassword"}},[t("div",{staticClass:"d-flex flex-column justify-content-center align-items-center mb-3"},[t("h1",[e._v("修改密碼")]),t("div",{staticClass:"d-flex flex-column flex-md-row align-items-center mb-2"},[t("span",{staticClass:"mb-2 mb-md-0"},[e._v("原密碼")]),t("InputText",{staticClass:"ms-md-3 flex-grow-1",attrs:{type:"password"},on:{keydown:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.updateAndSave.apply(null,arguments)}},model:{value:e.oldPassword,callback:function(s){e.oldPassword=s},expression:"oldPassword"}})],1),t("div",{staticClass:"d-flex flex-column flex-md-row align-items-center mb-2"},[t("span",{staticClass:"mb-2 mb-md-0"},[e._v("新密碼")]),t("InputText",{staticClass:"ms-md-3 flex-grow-1",attrs:{type:"password"},on:{keydown:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.updateAndSave.apply(null,arguments)}},model:{value:e.newPassword,callback:function(s){e.newPassword=s},expression:"newPassword"}})],1),t("div",{staticClass:"d-flex flex-column flex-md-row align-items-center mb-2"},[t("span",{staticClass:"mb-2 mb-md-0"},[e._v("再次輸入新密碼")]),t("InputText",{staticClass:"ms-md-3 flex-grow-1",attrs:{type:"password"},on:{keydown:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.updateAndSave.apply(null,arguments)}},model:{value:e.newPasswordAgain,callback:function(s){e.newPasswordAgain=s},expression:"newPasswordAgain"}})],1)]),t("Button",{staticClass:"p-button-rounded p-button-raised",attrs:{label:"保存修改",disabled:e.sending},on:{click:e.updateAndSave}}),t("Toast",{attrs:{position:"top-center"}})],1)},a=[],n=t("1da1"),d=(t("96cf"),t("b5ae")),o={data:function(){return{sending:!1,oldPassword:"",newPassword:"",newPasswordAgain:""}},validations:{oldPassword:{required:d["required"]},newPassword:{required:d["required"]},newPasswordAgain:{required:d["required"],sameAsPassword:Object(d["sameAs"])("newPassword")}},methods:{updateAndSave:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var t;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,!e.sending){s.next=3;break}return s.abrupt("return");case 3:if(e.$v.$touch(),!e.$v.$error){s.next=7;break}return e.$v.oldPassword.required?e.$v.newPassword.required?e.$v.newPasswordAgain.required?e.$v.newPasswordAgain.sameAsPassword||e.$toast.add({severity:"error",summary:"錯誤",detail:"新密碼與再次輸入不同",life:3e3}):e.$toast.add({severity:"error",summary:"錯誤",detail:"未再次輸入新密碼",life:3e3}):e.$toast.add({severity:"error",summary:"錯誤",detail:"未填寫新密碼",life:3e3}):e.$toast.add({severity:"error",summary:"錯誤",detail:"未填寫原密碼",life:3e3}),s.abrupt("return");case 7:return s.next=9,e.$swal({icon:"warning",title:"是否要保存修改?",showCancelButton:!0});case 9:if(t=s.sent,!t.isDismissed){s.next=12;break}return s.abrupt("return");case 12:return e.sending=!0,s.next=15,e.serverAPI.patch("/users/editpassword",{account:e.userInfo.account,oldPassword:e.oldPassword,newPassword:e.newPassword},{headers:{authorization:"Bearer "+e.userInfo.token}});case 15:e.sending=!1,e.oldPassword="",e.newPassword="",e.newPasswordAgain="",e.$swal({icon:"success",titel:"成功",text:"成功修改密碼"}),s.next=26;break;case 22:s.prev=22,s.t0=s["catch"](0),e.sending=!1,e.$swal({icon:"error",titel:"錯誤",text:s.t0.response.data.message});case 26:case"end":return s.stop()}}),s,null,[[0,22]])})))()}}},i=o,l=t("2877"),u=Object(l["a"])(i,r,a,!1,null,null,null);s["default"]=u.exports}}]);
//# sourceMappingURL=EditPassword.e61ee40b.js.map