{"version":3,"sources":["webpack:///./src/views/Play/JoinGame.vue?4880","webpack:///src/views/Play/JoinGame.vue","webpack:///./src/views/Play/JoinGame.vue?7efe","webpack:///./src/views/Play/JoinGame.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","scopedSlots","_u","key","fn","_v","proxy","staticClass","staticStyle","on","$event","type","indexOf","_k","keyCode","joinRoom","apply","arguments","model","value","callback","$$v","playerName","expression","$v","required","$error","_e","roomId","minLength","_s","$params","min","staticRenderFns","name","data","validations","methods","$touch","$toast","add","$socket","connected","emit","sockets","joinRoomSuccess","$router","push","created","userInfo","nickname","account","beforeRouteEnter","next","vm","$route","query","connect","beforeRouteLeave","to","path","disconnect","component"],"mappings":"iHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,aAAa,CAACF,EAAG,QAAQ,CAACG,YAAYP,EAAIQ,GAAG,CAAC,CAACC,IAAI,OAAOC,GAAG,WAAW,MAAO,CAACV,EAAIW,GAAG,YAAYC,OAAM,OAAUR,EAAG,MAAM,CAACS,YAAY,cAAc,CAACT,EAAG,MAAM,CAACS,YAAY,UAAUC,YAAY,CAAC,MAAQ,cAAc,aAAa,WAAW,CAACV,EAAG,MAAM,CAACS,YAAY,0DAA0D,CAACT,EAAG,OAAO,CAACS,YAAY,gBAAgB,CAACb,EAAIW,GAAG,UAAUP,EAAG,YAAY,CAACS,YAAY,sBAAsBE,GAAG,CAAC,QAAU,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQlB,EAAImB,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOP,IAAI,SAAkB,KAAcT,EAAIqB,SAASC,MAAM,KAAMC,aAAaC,MAAM,CAACC,MAAOzB,EAAc,WAAE0B,SAAS,SAAUC,GAAM3B,EAAI4B,WAAWD,GAAKE,WAAW,iBAAiB,IAAK7B,EAAI8B,GAAGF,WAAWG,UAAY/B,EAAI8B,GAAGF,WAAWI,OAAQ5B,EAAG,MAAM,CAACS,YAAY,mBAAmB,CAACb,EAAIW,GAAG,UAAUX,EAAIiC,KAAK7B,EAAG,MAAM,CAACS,YAAY,0DAA0D,CAACT,EAAG,OAAO,CAACS,YAAY,gBAAgB,CAACb,EAAIW,GAAG,YAAYP,EAAG,YAAY,CAACS,YAAY,sBAAsBP,MAAM,CAAC,UAAY,KAAKS,GAAG,CAAC,QAAU,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQlB,EAAImB,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOP,IAAI,SAAkB,KAAcT,EAAIqB,SAASC,MAAM,KAAMC,aAAaC,MAAM,CAACC,MAAOzB,EAAU,OAAE0B,SAAS,SAAUC,GAAM3B,EAAIkC,OAAOP,GAAKE,WAAW,aAAa,IAAK7B,EAAI8B,GAAGI,OAAOH,UAAY/B,EAAI8B,GAAGI,OAAOF,OAAQ5B,EAAG,MAAM,CAACS,YAAY,mBAAmB,CAACb,EAAIW,GAAG,eAAeX,EAAIiC,MAAOjC,EAAI8B,GAAGI,OAAOC,WAAanC,EAAI8B,GAAGI,OAAOF,OAAQ5B,EAAG,MAAM,CAACS,YAAY,mBAAmB,CAACb,EAAIW,GAAG,cAAcX,EAAIoC,GAAGpC,EAAI8B,GAAGI,OAAOG,QAAQF,UAAUG,QAAQtC,EAAIiC,KAAK7B,EAAG,SAAS,CAACS,YAAY,wCAAwCP,MAAM,CAAC,MAAQ,MAAMS,GAAG,CAAC,MAAQf,EAAIqB,aAAa,KAAKjB,EAAG,QAAQ,CAACE,MAAM,CAAC,SAAW,iBAAiB,IAC52DiC,EAAkB,G,YC6BtB,GACEC,KAAM,aACNC,KAFF,WAGI,MAAO,CACLb,WAAY,GACZM,OAAQ,KAGZQ,YAAa,CACXd,WAAY,CACVG,SAAN,eAEIG,OAAQ,CACNH,SAAN,cACMI,UAAW,OAAjB,eAAiB,CAAjB,KAGEQ,QAAS,CACPtB,SADJ,WAEMpB,KAAK6B,GAAGc,SACJ3C,KAAK6B,GAAGE,OACV/B,KAAK4C,OAAOC,IAAI,CAAxB,yDAIU7C,KAAK8C,QAAQC,WACf/C,KAAK8C,QAAQE,KAAK,WAC1B,CACU,SAAV,kBACU,WAAV,gBACU,OAAV,qBACU,OAAV,gBAKEC,QAAS,CACPC,gBADJ,WAEMlD,KAAKmD,QAAQC,KAAK,WAGtBC,QAzCF,WA0CIrD,KAAKsD,SAASC,SAAWvD,KAAK2B,WAAa3B,KAAKsD,SAASC,SAAWvD,KAAK2B,WAAa3B,KAAKsD,SAASE,SAEtGC,iBA5CF,SA4CA,OACIC,GAAK,SAAT,GACUC,EAAGb,QAAQC,UACbW,EAAK,UAEDC,EAAGC,OAAOC,MAAM5B,SAClB0B,EAAG1B,OAAS0B,EAAGC,OAAOC,MAAM5B,QAE9B0B,EAAGb,QAAQgB,eAIjBC,iBAxDF,SAwDA,OACoB,UAAZC,EAAGC,MACLjE,KAAK8C,QAAQoB,aAEfR,MC1F6V,I,YCO7VS,EAAY,eACd,EACArE,EACAwC,GACA,EACA,KACA,KACA,MAIa,aAAA6B,E","file":"js/JoinGame.8fa0b610.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"joinGame\"}},[_c('Title',{scopedSlots:_vm._u([{key:\"text\",fn:function(){return [_vm._v(\" 加入遊戲 \")]},proxy:true}])}),_c('div',{staticClass:\"subViewBox\"},[_c('div',{staticClass:\"mx-auto\",staticStyle:{\"width\":\"max-content\",\"text-align\":\"center\"}},[_c('div',{staticClass:\"d-flex flex-column flex-md-row align-items-center mb-2\"},[_c('span',{staticClass:\"mb-2 mb-md-0\"},[_vm._v(\"您的暱稱\")]),_c('InputText',{staticClass:\"ms-md-3 flex-grow-1\",on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.joinRoom.apply(null, arguments)}},model:{value:(_vm.playerName),callback:function ($$v) {_vm.playerName=$$v},expression:\"playerName\"}})],1),(!_vm.$v.playerName.required && _vm.$v.playerName.$error)?_c('div',{staticClass:\"invalidMsg mb-3\"},[_vm._v(\"暱稱必填\")]):_vm._e(),_c('div',{staticClass:\"d-flex flex-column flex-md-row align-items-center mb-2\"},[_c('span',{staticClass:\"mb-2 mb-md-0\"},[_vm._v(\"遊戲間 ID\")]),_c('InputText',{staticClass:\"ms-md-3 flex-grow-1\",attrs:{\"maxlength\":\"6\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.joinRoom.apply(null, arguments)}},model:{value:(_vm.roomId),callback:function ($$v) {_vm.roomId=$$v},expression:\"roomId\"}})],1),(!_vm.$v.roomId.required && _vm.$v.roomId.$error)?_c('div',{staticClass:\"invalidMsg mb-3\"},[_vm._v(\"遊戲間 ID 必填\")]):_vm._e(),(!_vm.$v.roomId.minLength && _vm.$v.roomId.$error)?_c('div',{staticClass:\"invalidMsg mb-3\"},[_vm._v(\"遊戲間 ID 長度為 \"+_vm._s(_vm.$v.roomId.$params.minLength.min))]):_vm._e(),_c('Button',{staticClass:\"p-button-rounded p-button-raised mt-3\",attrs:{\"label\":\"加入\"},on:{\"click\":_vm.joinRoom}})],1)]),_c('Toast',{attrs:{\"position\":\"top-center\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"joinGame\" >\n    <Title>\n      <template #text>\n        加入遊戲\n      </template>\n    </Title>\n    <div class=\"subViewBox\">\n      <div class=\"mx-auto\" style=\"width: max-content; text-align: center\">\n        <div class=\"d-flex flex-column flex-md-row align-items-center mb-2\">\n          <span class=\"mb-2 mb-md-0\">您的暱稱</span>\n          <InputText v-model=\"playerName\" @keydown.enter=\"joinRoom\" class=\"ms-md-3 flex-grow-1\"/>\n        </div>\n        <div class=\"invalidMsg mb-3\" v-if=\"!$v.playerName.required && $v.playerName.$error\">暱稱必填</div>\n        <div class=\"d-flex flex-column flex-md-row align-items-center mb-2\">\n          <span class=\"mb-2 mb-md-0\">遊戲間 ID</span>\n          <InputText v-model=\"roomId\" @keydown.enter=\"joinRoom\" class=\"ms-md-3 flex-grow-1\" maxlength=\"6\"/>\n        </div>\n        <div class=\"invalidMsg mb-3\" v-if=\"!$v.roomId.required && $v.roomId.$error\">遊戲間 ID 必填</div>\n        <div class=\"invalidMsg mb-3\" v-if=\"!$v.roomId.minLength && $v.roomId.$error\">遊戲間 ID 長度為 {{$v.roomId.$params.minLength.min}}</div>\n        <Button @click=\"joinRoom\" label=\"加入\" class=\"p-button-rounded p-button-raised mt-3\"/>\n      </div>\n    </div>\n    <Toast position=\"top-center\" />\n  </div>\n</template>\n\n<script>\nimport { required, minLength } from 'vuelidate/lib/validators'\n\nexport default {\n  name: 'CreateGame',\n  data () {\n    return {\n      playerName: '',\n      roomId: ''\n    }\n  },\n  validations: {\n    playerName: {\n      required\n    },\n    roomId: {\n      required,\n      minLength: minLength(6)\n    }\n  },\n  methods: {\n    joinRoom () {\n      this.$v.$touch()\n      if (this.$v.$error) {\n        this.$toast.add({ severity: 'error', summary: '錯誤', detail: '缺少必要項目', life: 3000 })\n        return\n      }\n\n      if (this.$socket.connected) {\n        this.$socket.emit('joinRoom',\n          {\n            playerId: this.userInfo._id,\n            playerName: this.playerName,\n            avatar: this.userInfo.avatar,\n            roomId: this.roomId\n          })\n      }\n    }\n  },\n  sockets: {\n    joinRoomSuccess () {\n      this.$router.push('/room')\n    }\n  },\n  created () {\n    this.userInfo.nickname ? this.playerName = this.userInfo.nickname : this.playerName = this.userInfo.account\n  },\n  beforeRouteEnter (to, from, next) {\n    next(vm => {\n      if (vm.$socket.connected) {\n        next('/room')\n      } else {\n        if (vm.$route.query.roomId) {\n          vm.roomId = vm.$route.query.roomId\n        }\n        vm.$socket.connect()\n      }\n    })\n  },\n  beforeRouteLeave (to, from, next) {\n    if (to.path !== '/room') {\n      this.$socket.disconnect()\n    }\n    next()\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JoinGame.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./JoinGame.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./JoinGame.vue?vue&type=template&id=1b59d2b5&\"\nimport script from \"./JoinGame.vue?vue&type=script&lang=js&\"\nexport * from \"./JoinGame.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}