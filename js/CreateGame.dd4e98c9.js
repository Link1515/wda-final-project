(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CreateGame"],{"18e5":function(t,e,i){},"41b1":function(t,e,i){"use strict";t.exports=i("4dec")},"4dec":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",class:t.containerClass,on:{click:t.onBarClick}},[i("span",{staticClass:"p-slider-range",style:t.rangeStyle}),t.range?t._e():i("span",{staticClass:"p-slider-handle",style:t.handleStyle,attrs:{tabindex:"0",role:"slider","aria-valuemin":t.min,"aria-valuenow":t.value,"aria-valuemax":t.max,"aria-labelledby":t.ariaLabelledBy},on:{touchstart:function(e){return t.onDragStart(e)},touchmove:function(e){return t.onDrag(e)},touchend:function(e){return t.onDragEnd(e)},mousedown:function(e){return t.onMouseDown(e)},keydown:function(e){return t.onKeyDown(e)}}}),t.range?i("span",{staticClass:"p-slider-handle",style:t.rangeStartHandleStyle,attrs:{tabindex:"0",role:"slider","aria-valuemin":t.min,"aria-valuenow":t.value?t.value[0]:null,"aria-valuemax":t.max,"aria-labelledby":t.ariaLabelledBy},on:{touchstart:function(e){return t.onDragStart(e,0)},touchmove:function(e){return t.onDrag(e)},touchend:function(e){return t.onDragEnd(e)},mousedown:function(e){return t.onMouseDown(e,0)},keydown:function(e){return t.onKeyDown(e)}}}):t._e(),t.range?i("span",{staticClass:"p-slider-handle",style:t.rangeEndHandleStyle,attrs:{tabindex:"0",role:"slider","aria-valuemin":t.min,"aria-valuenow":t.value?t.value[1]:null,"aria-valuemax":t.max,"aria-labelledby":t.ariaLabelledBy},on:{touchstart:function(e){return t.onDragStart(e,1)},touchmove:function(e){return t.onDrag(e)},touchend:function(e){return t.onDragEnd(e)},mousedown:function(e){return t.onMouseDown(e,1)},keydown:function(e){return t.onKeyDown(e,1)}}}):t._e()])},a=[],s=i("2909"),r=(i("a9e3"),i("b680"),i("11cd")),o=i.n(r),l={props:{value:[Number,Array],min:{type:Number,default:0},max:{type:Number,default:100},orientation:{type:String,default:"horizontal"},step:{type:Number,default:null},range:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},ariaLabelledBy:{type:String,default:null}},dragging:!1,handleIndex:null,initX:null,initY:null,barWidth:null,barHeight:null,dragListener:null,dragEndListener:null,beforeDestroy:function(){this.unbindDragListeners()},methods:{updateDomData:function(){var t=this.$refs.container.getBoundingClientRect();this.initX=t.left+o.a.getWindowScrollLeft(),this.initY=t.top+o.a.getWindowScrollTop(),this.barWidth=this.$refs.container.offsetWidth,this.barHeight=this.$refs.container.offsetHeight},setValue:function(t){var e,i=t.touches?t.touches[0].pageX:t.pageX,n=t.touches?t.touches[0].pageY:t.pageY;e="horizontal"===this.orientation?100*(i-this.initX)/this.barWidth:100*(this.initY+this.barHeight-n)/this.barHeight;var a=(this.max-this.min)*(e/100)+this.min;if(this.step){var s=this.range?this.value[this.handleIndex]:this.value,r=a-s;r<0?a=s+Math.ceil(a/this.step-s/this.step)*this.step:r>0&&(a=s+Math.floor(a/this.step-s/this.step)*this.step)}else a=Math.floor(a);this.updateModel(t,a)},updateModel:function(t,e){var i,n=parseFloat(e.toFixed(10));if(this.range)if(i=this.value?Object(s["a"])(this.value):[],0==this.handleIndex){var a=this.value?this.value[1]:this.max;n<this.min?n=this.min:n>=a&&(n=a),i[0]=n,i[1]=i[1]||this.max}else{var r=this.value?this.value[0]:this.min;n>this.max?n=this.max:n<=r&&(n=r),i[0]=i[0]||this.min,i[1]=n}else n<this.min?n=this.min:n>this.max&&(n=this.max),i=n;this.$emit("input",i),this.$emit("change",i)},onDragStart:function(t,e){this.disabled||(o.a.addClass(this.$el,"p-slider-sliding"),this.dragging=!0,this.updateDomData(),this.handleIndex=e,t.preventDefault())},onDrag:function(t){this.dragging&&(this.setValue(t),t.preventDefault())},onDragEnd:function(t){this.dragging&&(this.dragging=!1,o.a.removeClass(this.$el,"p-slider-sliding"),this.$emit("slideend",{originalEvent:t,value:this.value}))},onBarClick:function(t){this.disabled||o.a.hasClass(t.target,"p-slider-handle")||(this.updateDomData(),this.setValue(t))},onMouseDown:function(t,e){this.bindDragListeners(),this.onDragStart(t,e)},onKeyDown:function(t,e){switch(this.handleIndex=e,t.which){case 40:this.vertical&&(this.decrementValue(t,e),t.preventDefault());break;case 38:this.vertical&&(this.incrementValue(t,e),t.preventDefault());break;case 37:this.horizontal&&(this.decrementValue(t,e),t.preventDefault());break;case 39:this.horizontal&&(this.incrementValue(t,e),t.preventDefault());break;default:break}},decrementValue:function(t,e){var i;i=this.range?this.step?this.value[e]-this.step:this.value[e]-1:this.step?this.value-this.step:this.value-1,this.updateModel(t,i),t.preventDefault()},incrementValue:function(t,e){var i;i=this.range?this.step?this.value[e]+this.step:this.value[e]+1:this.step?this.value+this.step:this.value+1,this.updateModel(t,i),t.preventDefault()},bindDragListeners:function(){this.dragListener||(this.dragListener=this.onDrag.bind(this),document.addEventListener("mousemove",this.dragListener)),this.dragEndListener||(this.dragEndListener=this.onDragEnd.bind(this),document.addEventListener("mouseup",this.dragEndListener))},unbindDragListeners:function(){this.dragListener&&(document.removeEventListener("mousemove",this.dragListener),this.dragListener=null),this.dragEndListener&&(document.removeEventListener("mouseup",this.dragEndListener),this.dragEndListener=null)}},computed:{containerClass:function(){return["p-slider p-component",{"p-disabled":this.disabled,"p-slider-horizontal":"horizontal"===this.orientation,"p-slider-vertical":"vertical"===this.orientation}]},horizontal:function(){return"horizontal"===this.orientation},vertical:function(){return"vertical"===this.orientation},rangeStyle:function(){return this.range?this.horizontal?{left:this.rangeStartPosition+"%",width:this.rangeEndPosition-this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%",height:this.rangeEndPosition-this.rangeStartHandlePosition+"%"}:this.horizontal?{width:this.handlePosition+"%"}:{height:this.handlePosition+"%"}},handleStyle:function(){return this.horizontal?{left:this.handlePosition+"%"}:{bottom:this.handlePosition+"%"}},handlePosition:function(){return this.value<this.min?0:this.value>this.max?100:100*(this.value-this.min)/(this.max-this.min)},rangeStartPosition:function(){return this.value&&this.value[0]?100*(this.value[0]<this.min?0:this.value[0]-this.min)/(this.max-this.min):0},rangeEndPosition:function(){return this.value&&this.value[1]?100*(this.value[1]>this.max?100:this.value[1]-this.min)/(this.max-this.min):100},rangeStartHandleStyle:function(){return this.horizontal?{left:this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%"}},rangeEndHandleStyle:function(){return this.horizontal?{left:this.rangeEndPosition+"%"}:{bottom:this.rangeEndPosition+"%"}}}},u=l,h=(i("51b2"),i("2877")),d=Object(h["a"])(u,n,a,!1,null,null,null);e["default"]=d.exports},"51b2":function(t,e,i){"use strict";i("18e5")},"6e30":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"createGame"}},[n("Title",{scopedSlots:t._u([{key:"text",fn:function(){return[t._v(" 創建遊戲 ")]},proxy:!0}])}),n("div",{staticClass:"subViewBox"},[n("div",{staticClass:"mx-auto",staticStyle:{width:"max-content"}},[n("div",{staticClass:"d-flex flex-column flex-md-row align-items-center mb-2"},[n("span",{staticClass:"mb-2 mb-md-0"},[t._v("您的暱稱")]),n("InputText",{staticClass:"ms-md-3 flex-grow-1",model:{value:t.playerName,callback:function(e){t.playerName=e},expression:"playerName"}})],1),!t.$v.playerName.required&&t.$v.playerName.$error?n("div",{staticClass:"invalidMsg mb-3",staticStyle:{"text-align":"center"}},[t._v("暱稱必填")]):t._e(),n("div",{staticClass:"d-flex flex-column flex-md-row align-items-center mb-3"},[n("div",{staticClass:"flex-shrink-0 mb-2 mb-md-0"},[t._v("選擇遊戲")]),n("VueSelect",{staticClass:"flex-grow-1 ms-md-3",staticStyle:{width:"100%"},attrs:{options:t.$store.state.user.favoriteGame,reduce:function(t){return t.game},label:"name",placeholder:"---選擇遊戲---"},model:{value:t.selectedGame,callback:function(e){t.selectedGame=e},expression:"selectedGame"}})],1),t.$store.state.game._id?n("div",{staticClass:"d-flex align-items-center mb-3"},[n("span",[t._v("遊玩人數 "+t._s(t.playerAmount))]),n("Slider",{staticClass:"ms-3 flex-grow-1",attrs:{step:1,min:t.$store.state.game.playerRange[0],max:t.$store.state.game.playerRange[1]},model:{value:t.playerAmount,callback:function(e){t.playerAmount=e},expression:"playerAmount"}})],1):t._e()]),t.$store.state.game._id?n("div",{staticClass:"col-12 col-md-8 mx-auto",staticStyle:{"text-align":"center"}},[n("div",{staticClass:"mx-auto",staticStyle:{"max-width":"600px"}},[t.$store.state.game.image?n("img",{attrs:{src:t.$store.state.game.image}}):n("img",{attrs:{src:i("04d5")}})]),n("Button",{staticClass:"p-button-rounded p-button-raised mt-3",attrs:{label:"創建"},on:{click:t.createRoom}})],1):t._e()]),n("Toast",{attrs:{position:"top-center"}})],1)},a=[],s=i("b5ae"),r=i("41b1"),o=i.n(r),l={name:"CreateGame",components:{Slider:o.a},data:function(){return{playerName:"",selectedGame:"",playerAmount:0}},validations:{playerName:{required:s["required"]}},methods:{createRoom:function(){this.$v.$touch(),this.$v.$error?this.$toast.add({severity:"error",summary:"錯誤",detail:"缺少必要項目",life:3e3}):(this.$socket.connected&&this.$socket.emit("createRoom",{playerId:this.userInfo._id,playerName:this.playerName,avatar:this.userInfo.avatar,playerAmount:this.playerAmount,gameId:this.selectedGame}),this.$router.push("/room"))}},watch:{selectedGame:function(t){t&&(this.$store.dispatch("game/getOneGame",this.selectedGame),this.playerAmount=this.$store.state.game.playerRange[0])}},created:function(){this.$store.getters["user/userInfo"].isLogin?(this.$store.commit("game/reset"),this.$store.dispatch("user/refreshFavGame"),this.userInfo.nickname?this.playerName=this.userInfo.nickname:this.playerName=this.userInfo.account):this.$router.push("/play?login=0")},beforeRouteEnter:function(t,e,i){i((function(t){t.$socket.connected?i("/room"):t.$store.getters["user/userInfo"].isLogin&&t.$socket.connect()}))},beforeRouteLeave:function(t,e,i){"/room"!==t.path&&this.$socket.disconnect(),i()}},u=l,h=i("2877"),d=Object(h["a"])(u,n,a,!1,null,null,null);e["default"]=d.exports},b680:function(t,e,i){"use strict";var n=i("23e7"),a=i("da84"),s=i("e330"),r=i("5926"),o=i("408a"),l=i("1148"),u=i("d039"),h=a.RangeError,d=a.String,c=Math.floor,m=s(l),f=s("".slice),g=s(1..toFixed),p=function(t,e,i){return 0===e?i:e%2===1?p(t,e-1,i*t):p(t*t,e/2,i)},v=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},b=function(t,e,i){var n=-1,a=i;while(++n<6)a+=e*t[n],t[n]=a%1e7,a=c(a/1e7)},y=function(t,e){var i=6,n=0;while(--i>=0)n+=t[i],t[i]=c(n/e),n=n%e*1e7},x=function(t){var e=6,i="";while(--e>=0)if(""!==i||0===e||0!==t[e]){var n=d(t[e]);i=""===i?n:i+m("0",7-n.length)+n}return i},w=u((function(){return"0.000"!==g(8e-5,3)||"1"!==g(.9,0)||"1.25"!==g(1.255,2)||"1000000000000000128"!==g(0xde0b6b3a7640080,0)}))||!u((function(){g({})}));n({target:"Number",proto:!0,forced:w},{toFixed:function(t){var e,i,n,a,s=o(this),l=r(t),u=[0,0,0,0,0,0],c="",g="0";if(l<0||l>20)throw h("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return d(s);if(s<0&&(c="-",s=-s),s>1e-21)if(e=v(s*p(2,69,1))-69,i=e<0?s*p(2,-e,1):s/p(2,e,1),i*=4503599627370496,e=52-e,e>0){b(u,0,i),n=l;while(n>=7)b(u,1e7,0),n-=7;b(u,p(10,n,1),0),n=e-1;while(n>=23)y(u,1<<23),n-=23;y(u,1<<n),b(u,1,1),y(u,2),g=x(u)}else b(u,0,i),b(u,1<<-e,0),g=x(u)+m("0",l);return l>0?(a=g.length,g=c+(a<=l?"0."+m("0",l-a)+g:f(g,0,a-l)+"."+f(g,a-l))):g=c+g,g}})}}]);
//# sourceMappingURL=CreateGame.dd4e98c9.js.map