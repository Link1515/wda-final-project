(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ManageUser"],{e5cc:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"ManageUser"}},[r("div",{staticClass:"d-flex flex-column justify-content-center align-items-center mb-3"},[r("h1",[e._v("會員管理")]),r("div",{staticClass:"d-flex flex-column flex-lg-row align-items-center mb-5"},[r("VueSelect",{staticClass:"VueSelectWidth me-lg-2 flex-grow-1 mb-2 mb-lg-0",staticStyle:{background:"#fff"},attrs:{options:e.searchTypeList,reduce:function(e){return e.type},label:"name",placeholder:"選擇搜尋類型"},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}}),r("InputText",{staticClass:"me-lg-2 flex-grow-1 mb-2 mb-lg-0",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchUser.apply(null,arguments)}},model:{value:e.searchStr,callback:function(t){e.searchStr=t},expression:"searchStr"}}),r("Button",{staticClass:"p-button-rounded p-button-raised",attrs:{icon:"pi pi-search"},on:{click:e.searchUser}})],1),e.gotUser?[r("div",{staticClass:"mb-3"},[e.gotUser.avatar?r("Avatar",{attrs:{image:e.gotUser.avatar,size:"xlarge",shape:"circle"}}):r("Avatar",{attrs:{icon:"pi pi-user",size:"xlarge",shape:"circle"}})],1),r("div",{staticClass:"d-flex flex-column flex-md-row align-items-center mb-2"},[r("span",{staticClass:"mb-2 mb-md-0"},[e._v("帳號")]),r("InputText",{staticClass:"ms-md-3 flex-grow-1",attrs:{readonly:"",value:e.gotUser.account}})],1),r("div",{staticClass:"d-flex flex-column flex-md-row align-items-center mb-4"},[r("span",{staticClass:"mb-2 mb-md-0"},[e._v("信箱")]),r("InputText",{staticClass:"ms-md-3 flex-grow-1",attrs:{readonly:"",value:e.gotUser.email}})],1),r("div",{staticClass:"d-flex flex-column flex-md-row align-items-center"},[r("Button",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:"將該用戶密碼重設為 0000",expression:"'將該用戶密碼重設為 0000'",modifiers:{bottom:!0}}],staticClass:"p-button-rounded p-button-raised mb-2 mb-md-0 mx-md-2",attrs:{label:"重設密碼"},on:{click:e.resetUserPassword}}),r("Button",{staticClass:"p-button-rounded p-button-raised p-button-danger mb-2 mb-md-0 mx-md-2",attrs:{label:"移除用戶"},on:{click:e.deleteUser}})],1)]:e._e()],2),r("Toast",{attrs:{position:"top-center"}})],1)},a=[],n=r("1da1"),c=(r("96cf"),{name:"ManageUser",data:function(){return{searchTypeList:[{name:"玩家帳號",type:"account"},{name:"玩家ID",type:"id"}],searchType:"",searchStr:"",gotUser:null}},methods:{searchUser:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.searchType){t.next=4;break}return e.$toast.add({severity:"error",summary:"錯誤",detail:"未選擇搜尋種類",life:3e3}),t.abrupt("return");case 4:if(e.searchStr){t.next=7;break}return e.$toast.add({severity:"error",summary:"錯誤",detail:"未填寫搜尋",life:3e3}),t.abrupt("return");case 7:return t.next=9,e.serverAPI.get("users/getUserBy"+e.searchType,{headers:{authorization:"Bearer "+e.userInfo.token},params:{searchStr:e.searchStr}});case 9:r=t.sent,s=r.data,e.searchStr="",e.gotUser=s.result,t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:t.t0.response.data.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},resetUserPassword:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$swal({icon:"warning",title:"是否確定重設用戶密碼?",showCancelButton:!0});case 3:if(r=t.sent,!r.isDismissed){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.serverAPI.patch("/users/resetUserPassword",{userId:e.gotUser._id},{headers:{authorization:"Bearer "+e.userInfo.token}});case 8:e.$swal({icon:"success",title:"成功",text:"成功重設"}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$swal({icon:"error",title:"失敗",text:t.t0.response.data.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},deleteUser:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$swal({icon:"warning",title:"是否確定刪除用戶?",showCancelButton:!0});case 3:if(r=t.sent,!r.isDismissed){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.serverAPI.delete("/users/deleteUser/"+e.gotUser._id,{headers:{authorization:"Bearer "+e.userInfo.token}});case 8:e.gotUser=null,e.$swal({icon:"success",title:"成功",text:"成功刪除用戶"}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:t.t0.response.data.message});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()}}}),i=c,o=r("2877"),l=Object(o["a"])(i,s,a,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=ManageUser.09044d06.js.map