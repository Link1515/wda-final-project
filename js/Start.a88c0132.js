(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Start"],{"08f9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"ripple",rawName:"v-ripple"}],class:t.buttonClass,attrs:{role:"checkbox","aria-labelledby":t.ariaLabelledBy,"aria-checked":t.value,tabindex:t.$attrs.disabled?null:"0"},on:{click:function(e){return t.onClick(e)}}},[t.hasIcon?a("span",{class:t.iconClass}):t._e(),a("span",{staticClass:"p-button-label"},[t._v(t._s(t.label))])])},s=[],r=a("15f1"),i=a.n(r),o={props:{value:Boolean,onIcon:String,offIcon:String,onLabel:String,offLabel:String,iconPos:{type:String,default:"left"},ariaLabelledBy:String},methods:{onClick:function(t){this.$attrs.disabled||(this.$emit("click",t),this.$emit("input",!this.value),this.$emit("change",t))}},computed:{buttonClass:function(){return{"p-button p-togglebutton p-component":!0,"p-button-icon-only":this.hasIcon&&!this.hasLabel,"p-disabled":this.$attrs.disabled,"p-highlight":!0===this.value}},iconClass:function(){return[this.value?this.onIcon:this.offIcon,"p-button-icon",{"p-button-icon-left":"left"===this.iconPos&&this.label,"p-button-icon-right":"right"===this.iconPos&&this.label}]},hasLabel:function(){return this.onLabel&&this.onLabel.length>0&&this.offLabel&&this.offLabel.length>0},hasIcon:function(){return this.onIcon&&this.onIcon.length>0&&this.offIcon&&this.offIcon.length>0},label:function(){return this.hasLabel?this.value?this.onLabel:this.offLabel:"&nbsp;"}},directives:{ripple:i.a}},l=o,c=a("2877"),u=Object(c["a"])(l,n,s,!1,null,null,null);e["default"]=u.exports},"1f6c":function(t,e,a){},2861:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.containerClass,on:{click:function(e){return t.onClick(e)}}},[a("div",{staticClass:"p-hidden-accessible"},[a("input",t._b({ref:"input",attrs:{type:"radio"},domProps:{checked:t.checked,value:t.value},on:{focus:function(e){return t.onFocus(e)},blur:function(e){return t.onBlur(e)}}},"input",t.$attrs,!1))]),a("div",{ref:"box",class:["p-radiobutton-box",{"p-highlight":t.checked,"p-disabled":t.$attrs.disabled,"p-focus":t.focused}],attrs:{role:"radio","aria-checked":t.checked}},[a("div",{staticClass:"p-radiobutton-icon"})])])},s=[],r=a("e17c"),i=a.n(r),o={inheritAttrs:!1,props:{value:null,modelValue:null},model:{prop:"modelValue",event:"input"},data:function(){return{focused:!1}},methods:{onClick:function(t){this.$attrs.disabled||(this.$emit("click",t),this.$emit("input",this.value),this.$refs.input.focus(),this.checked||this.$emit("change",t))},onFocus:function(t){this.focused=!0,this.$emit("focus",t)},onBlur:function(t){this.focused=!1,this.$emit("blur",t)}},computed:{checked:function(){return null!=this.modelValue&&i.a.equals(this.modelValue,this.value)},containerClass:function(){return["p-radiobutton p-component",{"p-radiobutton-checked":this.checked,"p-radiobutton-disabled":this.$attrs.disabled,"p-radiobutton-focused":this.focused}]}}},l=o,c=a("2877"),u=Object(c["a"])(l,n,s,!1,null,null,null);e["default"]=u.exports},"5ac0":function(t,e,a){},8659:function(t,e,a){"use strict";t.exports=a("2861")},"896c":function(t,e,a){"use strict";t.exports=a("08f9")},"9ab8":function(t,e,a){"use strict";a("1f6c")},baa4:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"viewBox routerviewHeight",attrs:{id:"start"}},[a("div",{staticClass:"subViewBox"},[a("TabView",[t.playerData&&1===t.playerData.role?a("TabPanel",{attrs:{header:"流程控制"}},[a("div",{staticClass:"row g-3",staticStyle:{"text-align":"center"}},[a("div",{staticClass:"col-12"},[a("VueSelect",{staticClass:"VueSelectWidth mx-auto mb-4",attrs:{options:t.gameInfo.stepList,reduce:function(e){return t.gameInfo.stepList.findIndex((function(t){return t.id===e.id}))},label:"name",placeholder:"選擇流程"},model:{value:t.stepIndex,callback:function(e){t.stepIndex=e},expression:"stepIndex"}})],1),a("div",{staticClass:"col-12"},[a("Button",{staticClass:"p-button-rounded p-button-raised p-button-lg",attrs:{label:t.stepRunning?"播放中":"播放",disabled:t.stepRunning,icon:"pi pi-caret-right"},on:{click:t.startStep}})],1),a("div",{staticClass:"col-12"},[a("Button",{staticClass:"p-button-rounded p-button-raised p-button-lg p-button-secondary",attrs:{label:"重置",icon:"pi pi-replay"},on:{click:t.resetStep}})],1),a("div",{staticClass:"col-12"},[a("Button",{staticClass:"p-button-rounded p-button-raised p-button-lg p-button-secondary",attrs:{label:"返回設定",icon:"pi pi-arrow-left"},on:{click:t.backToSetting}})],1)])]):t._e(),a("TabPanel",{attrs:{header:"在線玩家"}},[a("DataTable",{staticClass:"mb-3",attrs:{stripedRows:"",value:t.playerList}},[a("Column",{attrs:{bodyStyle:{textAlign:"center"}},scopedSlots:t._u([{key:"body",fn:function(e){return[1===e.data.role?a("FontAwesomeIcon",{staticStyle:{color:"#fa0"},attrs:{icon:["fas","crown"]}}):t._e()]}}])}),a("Column",{attrs:{header:"玩家頭像",bodyStyle:{textAlign:"center"}},scopedSlots:t._u([{key:"body",fn:function(t){return[t.data.avatar?a("Avatar",{attrs:{image:t.data.avatar,size:"large",shape:"circle"}}):a("Avatar",{attrs:{icon:"pi pi-user",size:"large",shape:"circle"}})]}}])}),a("Column",{attrs:{header:"玩家暱稱",bodyStyle:{textAlign:"center"}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("span",{class:{self:t.$socket.id===e.data.socketId}},[t._v(t._s(e.data.name))])]}}])}),t.playerData&&1===t.playerData.role?a("Column",{attrs:{header:"淘汰設定",bodyStyle:{textAlign:"center"}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("ToggleButton",{staticClass:"p-button-rounded p-button-raised",attrs:{onLabel:"存活",offLabel:"淘汰"},on:{change:t.eliminatePlayer},model:{value:e.data.alive,callback:function(a){t.$set(e.data,"alive",a)},expression:"slotProps.data.alive"}})]}}],null,!1,1876214943)}):a("Column",{attrs:{header:"淘汰狀況",bodyStyle:{textAlign:"center"}},scopedSlots:t._u([{key:"body",fn:function(e){return[e.data.alive?a("span",{staticClass:"aliveLabel"},[t._v("存活")]):a("span",{staticClass:"aliveLabel eliminate"},[t._v("淘汰")])]}}])})],1),a("div",{staticStyle:{"text-align":"center"}},[a("Button",{staticClass:"p-button-rounded p-button-raised p-button-danger",attrs:{label:"離開房間"},on:{click:t.leaveRoom}})],1)],1),""!==t.stepIndex&&t.stepListDisplayHelper[t.stepIndex]?a("TabPanel",{attrs:{header:"遊戲流程"}},[a("h2",{staticClass:"stepHeader",staticStyle:{"text-align":"center"}},[t._v(t._s(t.stepListDisplayHelper[t.stepIndex].name))]),a("StepList",{attrs:{data:t.stepListDisplayHelper[t.stepIndex].rules}})],1):t._e()],1)],1),a("VueModal",{attrs:{enableClose:!1,title:t.currentStepTitle,outClass:"cancelTransistion"},model:{value:t.stepCountDownModal,callback:function(e){t.stepCountDownModal=e},expression:"stepCountDownModal"}},[a("div",{ref:"stepShowCountDown",staticClass:"mb-5 mt-3",staticStyle:{background:"red",height:"5px"}})]),a("VueModal",{attrs:{enableClose:!1,title:t.currentStepTitle},model:{value:t.stepShowModal,callback:function(e){t.stepShowModal=e},expression:"stepShowModal"}},[a("div",{ref:"stepShowCountDown",staticClass:"mb-5 mt-3",staticStyle:{background:"red",height:"5px"}}),a("div",{staticClass:"row flex-wrap justify-content-center g-5",staticStyle:{"text-align":"center"}},t._l(t.shownPlayers,(function(e,n){return a("div",{key:n,staticClass:"col-3",staticStyle:{position:"relative"}},[e.markLabel?a("div",{staticClass:"mark self"},[t._v(t._s(e.markLabel))]):t._e(),e.avatar?a("Avatar",{staticClass:"mb-2",attrs:{image:e.avatar,size:"large",shape:"circle"}}):a("Avatar",{staticClass:"mb-2",attrs:{icon:"pi pi-user",size:"large",shape:"circle"}}),a("div",[t._v(t._s(e.name))])],1)})),0)]),a("VueModal",{attrs:{enableClose:!1,title:t.currentStepTitle,outClass:"cancelTransistion"},model:{value:t.stepCheckModal,callback:function(e){t.stepCheckModal=e},expression:"stepCheckModal"}},[a("div",{ref:"stepShowCountDown",staticClass:"mb-5 mt-3",staticStyle:{background:"red",height:"5px"}}),a("div",{staticClass:"row flex-wrap justify-content-center g-5",staticStyle:{"text-align":"center"}},t._l(t.shownPlayers,(function(e){return a("div",{key:e.socketId,staticClass:"col-3",staticStyle:{position:"relative"},on:{click:function(a){t.checkedPlayer=e}}},[t.checkedPlayer&&t.checkedPlayer.socketId===e.socketId?a("div",{staticClass:"mark self"},[t._v("查驗")]):t._e(),e.avatar?a("Avatar",{staticClass:"mb-2",staticStyle:{cursor:"pointer"},attrs:{image:e.avatar,size:"large",shape:"circle"}}):a("Avatar",{staticClass:"mb-2",staticStyle:{cursor:"pointer"},attrs:{icon:"pi pi-user",size:"large",shape:"circle"}}),a("div",[t._v(t._s(e.name))])],1)})),0)]),a("VueModal",{attrs:{enableClose:!1,title:t.currentStepTitle,outClass:"cancelTransistion"},model:{value:t.playerInfoModal,callback:function(e){t.playerInfoModal=e},expression:"playerInfoModal"}},[a("div",{ref:"stepShowCountDown",staticClass:"mb-5 mt-3",staticStyle:{background:"red",height:"5px"}}),a("div",{staticClass:"row flex-wrap justify-content-center g-5",staticStyle:{"text-align":"center"}},[t.checkedPlayer?a("div",{staticClass:"col-3"},[t.checkedPlayer.avatar?a("Avatar",{staticClass:"mb-2",attrs:{image:t.checkedPlayer.avatar,size:"large",shape:"circle"}}):a("Avatar",{staticClass:"mb-2",attrs:{icon:"pi pi-user",size:"large",shape:"circle"}}),a("div",{staticClass:"mb-3 mx-auto",staticStyle:{width:"max-content"}},[t._v(t._s(t.checkedPlayer.name))]),a("div",{staticClass:"mx-auto",staticStyle:{width:"max-content"}},[t._v(t._s(t.translateRoleType(t.checkedPlayer.camp)))])],1):t._e()])]),a("VueModal",{attrs:{enableClose:!1,title:t.currentStepTitle},model:{value:t.stepMarkModal,callback:function(e){t.stepMarkModal=e},expression:"stepMarkModal"}},[a("div",{ref:"stepShowCountDown",staticClass:"mb-5 mt-3",staticStyle:{background:"red",height:"5px"}}),a("div",{staticClass:"row flex-wrap justify-content-center g-5",staticStyle:{"text-align":"center"}},t._l(t.shownPlayers,(function(e){return a("div",{key:e.socketId,staticClass:"col-3",staticStyle:{position:"relative"},on:{click:function(a){return t.mark(e.socketId)}}},[t.markedPlayers.includes(e.socketId)?a("div",{staticClass:"mark",class:{self:e.socketId===t.myMarkedPlayer}},[t._v(t._s(t.markLabel))]):t._e(),e.avatar?a("Avatar",{staticClass:"mb-2",staticStyle:{cursor:"pointer"},attrs:{image:e.avatar,size:"large",shape:"circle"}}):a("Avatar",{staticClass:"mb-2",staticStyle:{cursor:"pointer"},attrs:{icon:"pi pi-user",size:"large",shape:"circle"}}),a("div",[t._v(t._s(e.name))])],1)})),0)]),a("VueModal",{attrs:{enableClose:!0,title:t.currentStepTitle},model:{value:t.markedResultModal,callback:function(e){t.markedResultModal=e},expression:"markedResultModal"}},[a("div",{staticClass:"mb-5 mt-3"}),a("div",{staticClass:"row flex-wrap justify-content-center g-5",staticStyle:{"text-align":"center"}},t._l(t.markedResult,(function(e,n){return a("div",{key:n,staticClass:"col-3",staticStyle:{position:"relative"}},[a("div",{staticClass:"mark self"},[t._v(t._s(e.markLabel))]),e.avatar?a("Avatar",{staticClass:"mb-2",attrs:{image:e.avatar,size:"large",shape:"circle"}}):a("Avatar",{staticClass:"mb-2",attrs:{icon:"pi pi-user",size:"large",shape:"circle"}}),a("div",[t._v(t._s(e.name))])],1)})),0)]),a("VueModal",{attrs:{enableClose:!1,title:t.currentStepTitle,outClass:"cancelTransistion"},model:{value:t.stepPickOneModal,callback:function(e){t.stepPickOneModal=e},expression:"stepPickOneModal"}},[a("div",{ref:"stepShowCountDown",staticClass:"mb-5 mt-3",staticStyle:{background:"red",height:"5px"}}),a("div",{staticClass:"d-flex flex-column g-3"},t._l(t.stepPickOneOptData,(function(e){return a("div",{key:e.inc,staticStyle:{"text-align":"center","margin-bottom":"0.5rem"}},[a("RadioButton",{staticClass:"me-3",attrs:{id:e.name,value:e.inc},on:{change:function(a){return t.pick(e.inc,t.stepPickOneOptData.length)}},model:{value:t.pickOneInc,callback:function(e){t.pickOneInc=e},expression:"pickOneInc"}}),a("label",{staticStyle:{cursor:"pointer"},attrs:{for:e.name}},[t._v(t._s(e.name))])],1)})),0)]),a("Toast",{attrs:{position:"top-center"}})],1)},s=[],r=a("b85c"),i=a("1da1"),o=a("5530"),l=(a("96cf"),a("c740"),a("a434"),a("d3b7"),a("99af"),a("b0c0"),a("4de4"),a("0e3b")),c=a.n(l),u=a("d5bb"),d=a.n(u),p=a("896c"),f=a.n(p),h=a("8659"),m=a.n(h),v=a("f001"),b=(a("5ac0"),a("2f62")),y=a("b5ae"),g=a("7f84"),k={name:"Start",components:{TabView:c.a,TabPanel:d.a,ToggleButton:f.a,RadioButton:m.a,VueModal:v["a"],StepList:g["a"]},data:function(){return{stepRunning:!1,currentStepTitle:"",stepIndex:"",stepCountDownModal:!1,stepShowModal:!1,stepCheckModal:!1,playerInfoModal:!1,stepMarkModal:!1,markedResultModal:!1,stepPickOneModal:!1,shownPlayers:[],checkedPlayer:null,myMarkedPlayer:null,markedPlayers:[],markLabel:null,markedResult:[],pickOneInc:-1,stepPickOneOptData:[],serverSkipInc:[-1,-1],intervalTimer:null}},validations:{stepIndex:{required:y["required"]}},computed:Object(o["a"])(Object(o["a"])({},Object(b["c"])("room",["gameInfo","playerList","msg","startState"])),Object(b["b"])("room",["playerData","stepListDisplayHelper"])),methods:{backToSetting:function(){this.$socket.emit("backToSetting")},leaveRoom:function(){this.$socket.disconnect(),this.$store.commit("room/reset"),this.$router.push("/play"),this.$destroy()},startStep:function(){this.$v.$touch(),this.$v.stepIndex.required?this.$socket.emit("startStep",this.stepIndex):this.$toast.add({severity:"error",summary:"錯誤",detail:"未選擇流程",life:3e3})},resetStep:function(){speechSynthesis.cancel(),this.$socket.emit("resetStep")},eliminatePlayer:function(){this.$socket.emit("eliminatePlayer",this.playerList)},mark:function(t){var e=this;this.markedPlayers.push(t);var a=this.markedPlayers.findIndex((function(t){return t===e.myMarkedPlayer}));a>=0&&this.markedPlayers.splice(a,1),this.$socket.emit("updateMarkedPlayers",this.markedPlayers),this.myMarkedPlayer=t},pick:function(t,e){this.serverSkipInc=[t,e+1-t],this.$socket.emit("updateSkipInc",this.serverSkipInc),this.serverSkipInc=[-1,-1]},stepVoice:function(t,e){return new Promise((function(a,n){t.onend=a,t.text=e.data,speechSynthesis.speak(t)}))},stepCountDown:function(t){var e=this,a=t;return this.currentStepTitle="倒數 ".concat(a/1e3," 秒"),new Promise((function(n,s){e.stepCountDownModal=!0,e.intervalTimer=setInterval((function(){t-=10,e.$refs.stepShowCountDown&&(e.$refs.stepShowCountDown.style.width=parseInt(t/a*100)+"%"),t<0&&(clearInterval(e.intervalTimer),e.stepCountDownModal=!1,n())}),10)}))},stepShow:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("all"!==t.data.conductingRoleListType&&(t.data.conductingRoleListType!==a.playerData.camp||"all"!==t.data.conductingRoleId)&&t.data.conductingRoleId!==a.playerData.campRoleId&&t.data.conductingRoleId!==a.playerData.funRoleId){n.next=9;break}if(!a.playerData.alive){n.next=7;break}return a.currentStepTitle="".concat(a.translateRoleType(t.data.conductingRoleListType)," ").concat(a.translateRoleName(t.data.conductingRoleListType,t.data.conductingRoleId)," 執行顯示 ").concat(a.translateRoleType(t.data.roleListType)," ").concat(a.translateRoleName(t.data.roleListType,t.data.roleId),"，時間 ").concat(t.data.timer," 秒"),s=e,n.abrupt("return",new Promise((function(t,n){a.stepShowModal=!0,a.intervalTimer=setInterval((function(){e-=10,a.$refs.stepShowCountDown&&(a.$refs.stepShowCountDown.style.width=parseInt(e/s*100)+"%"),e<0&&(clearInterval(a.intervalTimer),a.stepShowModal=!1,t())}),10)})));case 7:return n.next=9,a.stepCountDown(e);case 9:case"end":return n.stop()}}),n)})))()},stepCheck:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("all"!==t.data.conductingRoleListType&&(t.data.conductingRoleListType!==a.playerData.camp||"all"!==t.data.conductingRoleId)&&t.data.conductingRoleId!==a.playerData.campRoleId&&t.data.conductingRoleId!==a.playerData.funRoleId){n.next=11;break}if(s=5e3,!a.playerData.alive){n.next=9;break}return a.currentStepTitle="".concat(a.translateRoleType(t.data.conductingRoleListType)," ").concat(a.translateRoleName(t.data.conductingRoleListType,t.data.conductingRoleId)," 執行查驗，時間 ").concat(t.data.timer," 秒"),r=e,i=s,n.abrupt("return",new Promise((function(t,n){a.stepCheckModal=!0,a.intervalTimer=setInterval((function(){if(e-=10,a.$refs.stepShowCountDown&&(a.$refs.stepShowCountDown.style.width=parseInt(e/r*100)+"%"),e<0){if(clearInterval(a.intervalTimer),a.stepCheckModal=!1,!a.checkedPlayer){var n=Math.round(Math.random()*(a.shownPlayers.length-1));a.checkedPlayer=a.shownPlayers[n]}a.currentStepTitle="查驗結果",a.playerInfoModal=!0,a.intervalTimer=setInterval((function(){s-=10,a.$refs.stepShowCountDown&&(a.$refs.stepShowCountDown.style.width=parseInt(s/i*100)+"%"),s<0&&(clearInterval(a.intervalTimer),a.playerInfoModal=!1,a.checkedPlayer=null,t())}),10)}}),10)})));case 9:return n.next=11,a.stepCountDown(e+s);case 11:case"end":return n.stop()}}),n)})))()},stepMark:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("all"!==t.data.conductingRoleListType&&(t.data.conductingRoleListType!==a.playerData.camp||"all"!==t.data.conductingRoleId)&&t.data.conductingRoleId!==a.playerData.campRoleId&&t.data.conductingRoleId!==a.playerData.funRoleId){n.next=10;break}if(!a.playerData.alive){n.next=8;break}return a.currentStepTitle="".concat(a.translateRoleType(t.data.conductingRoleListType)," ").concat(a.translateRoleName(t.data.conductingRoleListType,t.data.conductingRoleId)," 執行標記，時間 ").concat(t.data.timer," 秒"),a.markLabel=t.data.label,s=e,n.abrupt("return",new Promise((function(t,n){a.stepMarkModal=!0,a.intervalTimer=setInterval((function(){e-=10,a.$refs.stepShowCountDown&&(a.$refs.stepShowCountDown.style.width=parseInt(e/s*100)+"%"),e<0&&(clearInterval(a.intervalTimer),a.stepMarkModal=!1,a.myMarkedPlayer=null,t(!0))}),10)})));case 8:return n.next=10,a.stepCountDown(e);case 10:case"end":return n.stop()}}),n)})))()},stepPickOne:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var s,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a.stepPickOneOptData=t.data.optionsData,"all"!==t.data.conductingRoleListType&&(t.data.conductingRoleListType!==a.playerData.camp||"all"!==t.data.conductingRoleId)&&t.data.conductingRoleId!==a.playerData.campRoleId&&t.data.conductingRoleId!==a.playerData.funRoleId){n.next=14;break}if(!a.playerData.alive){n.next=8;break}return a.currentStepTitle="選擇要執行的項目",s=e,n.abrupt("return",new Promise((function(t,n){a.stepPickOneModal=!0,a.intervalTimer=setInterval((function(){if(e-=10,a.$refs.stepShowCountDown&&(a.$refs.stepShowCountDown.style.width=parseInt(e/s*100)+"%"),e<0){if(clearInterval(a.intervalTimer),a.stepPickOneModal=!1,a.pickOneInc=-1,a.serverSkipInc[0]<0){var n=Math.round(Math.random()*(a.stepPickOneOptData.length-1));a.pick(n+1,a.stepPickOneOptData.length)}t()}}),10)})));case 8:return r=Math.round(Math.random()*(a.stepPickOneOptData.length-1)),a.pick(r+1,a.stepPickOneOptData.length),n.next=12,a.stepCountDown(e);case 12:n.next=15;break;case 14:a.pick(a.stepPickOneOptData.length+1,a.stepPickOneOptData.length+1);case 15:case"end":return n.stop()}}),n)})))()},translateRoleType:function(t){switch(t){case"goodCampRoleList":return"好人陣營";case"badCampRoleList":return"壞人陣營";case"funRoleList":return"功能角色";case"labelResult":return"標記結果";case"all":return"所有人"}},translateRoleName:function(t,e){if(this.gameInfo[t]){var a,n=Object(r["a"])(this.gameInfo[t]);try{for(n.s();!(a=n.n()).done;){var s=a.value;if(s.id===e)return s.name}}catch(i){n.e(i)}finally{n.f()}return"所有人"}return""}},sockets:{backToSetting:function(){this.$store.commit("room/back"),this.$router.push("/room").catch((function(){}))},runStep:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s,r,i,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.stepIndex,s=t.gameStep,e.markedResultModal=!1,e.stepRunning||(e.stepRunning=!0),!isNaN(n)&&n>=0&&(e.stepIndex=n),r=e.gameInfo.stepList[e.stepIndex].rules,i=e.msg,o=e.playerList.filter((function(t){return t.alive})),l=!1,!r[s]){a.next=35;break}a.t0=r[s].mode,a.next="語音"===a.t0?12:"計時"===a.t0?15:"顯示"===a.t0?18:"查驗"===a.t0?22:"標記"===a.t0?26:"多選一"===a.t0?32:35;break;case 12:return a.next=14,e.stepVoice(i,r[s]);case 14:return a.abrupt("break",35);case 15:return a.next=17,e.stepCountDown(1e3*r[s].data);case 17:return a.abrupt("break",35);case 18:return"all"===r[s].data.roleListType?e.shownPlayers=o:"funRoleList"===r[s].data.roleListType?e.shownPlayers=o.filter((function(t){return t.funRoleId===r[s].data.roleId})):"goodCampRoleList"===r[s].data.roleListType?"all"===r[s].data.roleId?e.shownPlayers=o.filter((function(t){return"goodCampRoleList"===t.camp})):e.shownPlayers=o.filter((function(t){return t.campRoleId===r[s].data.roleId})):"badCampRoleList"===r[s].data.roleListType?"all"===r[s].data.roleId?e.shownPlayers=o.filter((function(t){return"badCampRoleList"===t.camp})):e.shownPlayers=o.filter((function(t){return t.campRoleId===r[s].data.roleId})):"labelResult"===r[s].data.roleListType&&(e.shownPlayers=e.markedResult),a.next=21,e.stepShow(r[s],1e3*r[s].data.timer);case 21:return a.abrupt("break",35);case 22:return e.shownPlayers=o,a.next=25,e.stepCheck(r[s],1e3*r[s].data.timer);case 25:return a.abrupt("break",35);case 26:return e.shownPlayers=o,e.$socket.emit("updateShownPlayers",e.shownPlayers),a.next=30,e.stepMark(r[s],1e3*r[s].data.timer);case 30:return l=a.sent,a.abrupt("break",35);case 32:return a.next=34,e.stepPickOne(r[s],1e3*r[s].data.timer);case 34:return a.abrupt("break",35);case 35:e.$socket.emit("stepDone",l);case 36:case"end":return a.stop()}}),a)})))()},resetStep:function(){clearInterval(this.intervalTimer),this.stepShowModal=!1,this.stepMarkModal=!1,this.stepRunning=!1},updateMarkedPlayers:function(t){this.markedPlayers=t},updateMarkedResult:function(t){this.markedResult=t},showMarkedResult:function(t){t.length&&(this.currentStepTitle="結果",this.markedResult=t,this.markedResultModal=!0)}},beforeRouteEnter:function(t,e,a){a((function(t){t.$socket.connected?t.startState||a("/room"):a("/play")}))},beforeRouteLeave:function(t,e,a){if(this.startState)return!1;a()}},w=k,C=(a("9ab8"),a("2877")),S=Object(C["a"])(w,n,s,!1,null,null,null);e["default"]=S.exports},f001:function(t,e,a){"use strict";a.d(e,"a",(function(){return T}));var n=a("2b0e"),s="-_",r=36;while(r--)s+=r.toString(36);r=36;while(r---10)s+=r.toString(36).toUpperCase();var i=function(t){var e="";r=t||21;while(r--)e+=s[64*Math.random()|0];return e},o=i;function l(t){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}var c={selector:"vue-portal-target-".concat(o())},u=function(t){return c.selector=t},d="undefined"!==typeof window&&void 0!==("undefined"===typeof document?"undefined":l(document)),p=n["default"].extend({abstract:!0,name:"PortalOutlet",props:["nodes","tag"],data:function(t){return{updatedNodes:t.nodes}},render:function(t){var e=this.updatedNodes&&this.updatedNodes();return e?e.length<2&&!e[0].text?e:t(this.tag||"DIV",e):t()},destroyed:function(){var t=this.$el;t.parentNode.removeChild(t)}}),f=n["default"].extend({name:"VueSimplePortal",props:{disabled:{type:Boolean},prepend:{type:Boolean},selector:{type:String,default:function(){return"#".concat(c.selector)}},tag:{type:String,default:"DIV"}},render:function(t){if(this.disabled){var e=this.$scopedSlots&&this.$scopedSlots.default();return e?e.length<2&&!e[0].text?e:t(this.tag,e):t()}return t()},created:function(){this.getTargetEl()||this.insertTargetEl()},updated:function(){var t=this;this.$nextTick((function(){t.disabled||t.slotFn===t.$scopedSlots.default||(t.container.updatedNodes=t.$scopedSlots.default),t.slotFn=t.$scopedSlots.default}))},beforeDestroy:function(){this.unmount()},watch:{disabled:{immediate:!0,handler:function(t){t?this.unmount():this.$nextTick(this.mount)}}},methods:{getTargetEl:function(){if(d)return document.querySelector(this.selector)},insertTargetEl:function(){if(d){var t=document.querySelector("body"),e=document.createElement(this.tag);e.id=this.selector.substring(1),t.appendChild(e)}},mount:function(){var t=this.getTargetEl(),e=document.createElement("DIV");this.prepend&&t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e),this.container=new p({el:e,parent:this,propsData:{tag:this.tag,nodes:this.$scopedSlots.default}})},unmount:function(){this.container&&(this.container.$destroy(),delete this.container)}}});function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(e.name||"portal",f),e.defaultSelector&&u(e.defaultSelector)}"undefined"!==typeof window&&window.Vue&&window.Vue===n["default"]&&n["default"].use(h);var m={type:[String,Object,Array],default:""},v='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])',b=0,y={name:"VueModal",components:{Portal:f},model:{prop:"basedOn",event:"close"},props:{title:{type:String,default:""},baseZindex:{type:Number,default:1051},bgClass:m,wrapperClass:m,modalClass:m,modalStyle:m,inClass:Object.assign({},m,{default:"vm-fadeIn"}),outClass:Object.assign({},m,{default:"vm-fadeOut"}),bgInClass:Object.assign({},m,{default:"vm-fadeIn"}),bgOutClass:Object.assign({},m,{default:"vm-fadeOut"}),appendTo:{type:String,default:"body"},live:{type:Boolean,default:!1},enableClose:{type:Boolean,default:!0},basedOn:{type:Boolean,default:!1}},data:function(){return{zIndex:0,id:null,show:!1,mount:!1,elToFocus:null}},created:function(){this.live&&(this.mount=!0)},mounted:function(){this.id="vm-"+this._uid,this.$watch("basedOn",(function(t){var e=this;t?(this.mount=!0,this.$nextTick((function(){e.show=!0}))):this.show=!1}),{immediate:!0})},beforeDestroy:function(){this.elToFocus=null},methods:{close:function(){!0===this.enableClose&&this.$emit("close",!1)},clickOutside:function(t){t.target===this.$refs["vm-wrapper"]&&this.close()},keydown:function(t){if(27===t.which&&this.close(),9===t.which){var e=[].slice.call(this.$refs["vm-wrapper"].querySelectorAll(v)).filter((function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}));t.shiftKey?t.target!==e[0]&&t.target!==this.$refs["vm-wrapper"]||(t.preventDefault(),e[e.length-1].focus()):t.target===e[e.length-1]&&(t.preventDefault(),e[0].focus())}},getAllVisibleWrappers:function(){return[].slice.call(document.querySelectorAll("[data-vm-wrapper-id]")).filter((function(t){return"none"!==t.display}))},getTopZindex:function(){return this.getAllVisibleWrappers().reduce((function(t,e){return parseInt(e.style.zIndex)>t?parseInt(e.style.zIndex):t}),0)},handleFocus:function(t){var e=t.querySelector("[autofocus]");if(e)e.focus();else{var a=t.querySelectorAll(v);a.length?a[0].focus():t.focus()}},beforeOpen:function(){this.elToFocus=document.activeElement;var t=this.getTopZindex();this.zIndex=b?b+2:0===t?this.baseZindex:t+2,b=this.zIndex,this.$emit("before-open")},opening:function(){this.$emit("opening")},afterOpen:function(){this.handleFocus(this.$refs["vm-wrapper"]),this.$emit("after-open")},beforeClose:function(){this.$emit("before-close")},closing:function(){this.$emit("closing")},afterClose:function(){var t=this;this.zIndex=0,this.live||(this.mount=!1),this.$nextTick((function(){window.requestAnimationFrame((function(){var e=t.getTopZindex();if(e>0)for(var a=t.getAllVisibleWrappers(),n=0;n<a.length;n++){var s=a[n];if(parseInt(s.style.zIndex)===e){s.contains(t.elToFocus)?t.elToFocus.focus():t.handleFocus(s);break}}else document.body.contains(t.elToFocus)&&t.elToFocus.focus();b=0,t.$emit("after-close")}))}))}}};function g(t,e,a,n,s,r,i,o,l,c){"boolean"!==typeof i&&(l=o,o=i,i=!1);var u,d="function"===typeof a?a.options:a;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,s&&(d.functional=!0)),n&&(d._scopeId=n),r?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},d._ssrRegister=u):e&&(u=i?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,o(t))}),u)if(d.functional){var p=d.render;d.render=function(t,e){return u.call(e),p(t,e)}}else{var f=d.beforeCreate;d.beforeCreate=f?[].concat(f,u):[u]}return a}var k=y,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.mount?a("portal",{attrs:{selector:t.appendTo}},[a("transition",{attrs:{name:"vm-backdrop-transition","enter-active-class":t.bgInClass,"leave-active-class":t.bgOutClass}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"vm-backdrop",class:t.bgClass,style:{"z-index":t.zIndex-1},attrs:{"data-vm-backdrop-id":t.id}})]),t._v(" "),a("transition",{attrs:{name:"vm-transition","enter-active-class":t.inClass,"leave-active-class":t.outClass},on:{"before-enter":t.beforeOpen,enter:t.opening,"after-enter":t.afterOpen,"before-leave":t.beforeClose,leave:t.closing,"after-leave":t.afterClose}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"vm-wrapper",staticClass:"vm-wrapper",class:t.wrapperClass,style:{"z-index":t.zIndex,cursor:t.enableClose?"pointer":"default"},attrs:{"data-vm-wrapper-id":t.id,tabindex:"-1",role:"dialog","aria-label":t.title,"aria-modal":"true"},on:{click:function(e){return t.clickOutside(e)},keydown:function(e){return t.keydown(e)}}},[a("div",{ref:"vm",staticClass:"vm",class:t.modalClass,style:t.modalStyle,attrs:{"data-vm-id":t.id}},[t._t("titlebar",(function(){return[a("div",{staticClass:"vm-titlebar"},[a("h3",{staticClass:"vm-title"},[t._v("\n              "+t._s(t.title)+"\n            ")]),t._v(" "),t.enableClose?a("button",{staticClass:"vm-btn-close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return e.preventDefault(),t.close.apply(null,arguments)}}}):t._e()])]})),t._v(" "),t._t("content",(function(){return[a("div",{staticClass:"vm-content"},[t._t("default")],2)]}))],2)])])],1):t._e()},C=[];w._withStripped=!0;var S=void 0,I=void 0,x=void 0,R=!1,T=g({render:w,staticRenderFns:C},S,k,I,R,x,!1,void 0,void 0,void 0)}}]);
//# sourceMappingURL=Start.a88c0132.js.map